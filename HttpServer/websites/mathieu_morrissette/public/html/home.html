
<div class="container">
	<div class="row">
		<div class="col-9">
			<div class="card">
				<div class="card-header">
				Post
				</div>
				<div class="card-body">
					<form id="post_form" action="/api/posts" method="POST">
						<div class="form-group">
							<textarea class="form-control" name="data" rows="3"></textarea>
						</div>						
						<button type="submit" class="btn btn-primary float-right">Post</button>
					</form>
				</div>
			</div>
			<div id="posts_container">
			</div>
		</div>

		<div class="col-3 ">
			<div class="card position-fixed" style="width: 20rem;">
				<img class="card-img-top" src="../images/banner.png" alt="UserBanner">
			<div class="card-body">
				<h4 class="card-title">__Username__</h4>
				<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
				<a href="#" class="btn btn-primary">My Profile</a>
				<a href="../user/logout" class="btn btn-primary float-right">Logout</a>
			</div>
		</div>
	</div>
</div>

</div>
	<script>
	function sendHttpGetRequest(theUrl, callback)
	{
		var xmlHttp = new XMLHttpRequest();
		xmlHttp.onreadystatechange = function() { 
			if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
				callback(xmlHttp.responseText);
		}
		xmlHttp.open("GET", theUrl, true); // true for asynchronous 
		xmlHttp.send(null);
	}

	sendHttpGetRequest("/api/posts", function(response) 
	{
		displayPosts(JSON.parse(response));
	});

	function displayPosts(posts)
	{
		var postHtmlTemplate = "<div class=\"card\">\
							<div class=\"card-header\">\
							__Username__\
							</div>\
							<div class=\"card-body\">\
								<p class=\"card-text\">__POST_DATA__</p>\
							</div>\
						</div>";

		var htmlToDisplay = "";

		for(var i = 0; i < posts.length; i++)
		{
			var post = posts[i];

			var postHtml = postHtmlTemplate.replace("__POST_DATA__", post.Data);

			htmlToDisplay = htmlToDisplay + postHtml;
		}

		document.getElementById("posts_container").innerHTML = htmlToDisplay;

	}

	</script>
