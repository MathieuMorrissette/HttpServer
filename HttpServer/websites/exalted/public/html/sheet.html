<script src="/javascript/network-helper.js"> </script>
<script src="/javascript/character-helper.js"> </script>

<div>
      <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#sheet" role="tab">Sheet</a>
            </li>
            <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#tab-charms" role="tab">Charms</a>
            </li>
            <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#tab-intimacies" role="tab">Intimacies</a>
            </li>
            <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#tab-inventory" role="tab">Inventory</a>
            </li>
      </ul>
      <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade" id="tab-intimacies" role="tabpanel">QA
                  <div class="row">
                        <div class="card col-sm-12">
                              <div class="card-body">
                                    <h4 class="card-title">Intimacies</h4>

                                    <form id="intimacies">

                                          <div class="form-row">
                                                <div class="col-5">
                                                      <div class="row" id="intimacy1">
                                                            <div class=" col-md-8">
                                                                  <label for="charm-name">Intimacy</label>
                                                                  <input type="text" class="form-control" name="intimacy1-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <label for="charm-type">Intensity</label>
                                                                  <input type="text" class="form-control" name="intimacy1-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>


                                                      <div class="row" id="intimacy2">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy2-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy2-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>


                                                      <div class="row" id="intimacy3">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy3-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy3-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy4">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy4-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy4-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy5">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy5-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy5-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy6">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy6-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy6-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="col-5 offset-sm-1">
                                                      <div class="row " id="intimacy7">
                                                            <div class=" col-md-8">
                                                                  <label for="charm-name">Intimacy</label>
                                                                  <input type="text" class="form-control" name="intimacy7-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <label for="charm-type">Intensity</label>
                                                                  <input type="text" class="form-control" name="intimacy7-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy8">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy8-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy8-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy9">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy9-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy9-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy10">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy10-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy10-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy11">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy11-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy11-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row" id="intimacy12">
                                                            <div class=" col-md-8">
                                                                  <input type="text" class="form-control" name="intimacy12-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="intimacy12-intensity" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>



                                    </form>


                              </div>
                        </div>
                  </div>
            </div>


            <div class="tab-pane fade" id="tab-inventory" role="tabpanel">
                  <div class="row">
                        <div class="card col-sm-12">
                              <div class="card-body">
                                    <h4 class="card-title">Inventory</h4>
                                    <form id="inventory">
                                          <div class="form-row">
                                                <div class="col-sm-6" id="inventory1">
                                                      <input type="text" name="inventory1-item" class="form-control" onchange="setControlStates()">
                                                </div>
                                                <div class="col-sm-6" id="inventory2">
                                                      <input type="text" name="inventory2-item" class="form-control" onchange="setControlStates()">
                                                </div>
                                          </div>
                                          <div class="form-row">
                                                <div class="col-sm-6" id="inventory3">
                                                      <input type="text" name="inventory3-item" class="form-control" onchange="setControlStates()">
                                                </div>
                                                <div class="col-sm-6" id="inventory4">
                                                      <input type="text" name="inventory4-item" class="form-control" onchange="setControlStates()">
                                                </div>
                                          </div>
                                          <div class="form-row">
                                                <div class="col-sm-6" id="inventory5">
                                                      <input type="text" name="inventory5-item" class="form-control" onchange="setControlStates()">
                                                </div>
                                                <div class="col-sm-6" id="inventory6">
                                                      <input type="text" name="inventory6-item" class="form-control" onchange="setControlStates()">
                                                </div>
                                          </div>
                                    </form>
                              </div>
                        </div>
                  </div>
            </div>


            <div class="tab-pane fade" id="tab-charms" role="tabpanel">
                  <div class="row">
                        <div class="card col-sm-12">
                              <div class="card-body">
                                    <h4 class="card-title">Charms</h4>
                                    <div class="row">
                                          <div class=" col-md-3">
                                                Name
                                          </div>
                                          <div class=" col-md-1">
                                                Type
                                          </div>
                                          <div class=" col-md-1">
                                                Duration
                                          </div>
                                          <div class=" col-md-1">
                                                Cost
                                          </div>
                                          <div class=" col-md-1">
                                                Book
                                          </div>
                                          <div class=" col-md-1">
                                                Page #
                                          </div>
                                          <div class=" col-md-3">
                                                Effects
                                          </div>

                                    </div>
                                    <form id="charms">
                                    </form>
                                    <hr />
                                    <button type="button" class="btn btn-primary float-right" onclick="addRow(charmTemplate, 'charms', 'charm'); setControlStates();">Add</button>
                              </div>
                        </div>
                  </div>
            </div>
            <div class="tab-pane fade show active" id="sheet" role="tabpanel">
                  <div class="row">
                        <div class="card col-sm-12">
                              <div class="card-body">
                                    <h4 class="card-title">General</h4>
                                    <form id="general">
                                          <div class=" row">
                                                <div class="input-group mb-3 col-sm-6">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Name</span>
                                                      </div>
                                                      <input type="text" name="name" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-6">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Concept</span>
                                                      </div>
                                                      <input type="text" name="concept" class="form-control text-right" onchange="setControlStates()">
                                                </div>
                                          </div>


                                          <div class=" row">
                                                <div class="input-group mb-3 col-sm-6">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Player</span>
                                                      </div>
                                                      <input type="text" name="owner" class="form-control text-right" disabled onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-6">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Anima</span>
                                                      </div>
                                                      <input type="text" name="anima" class="form-control text-right" onchange="setControlStates()">
                                                </div>
                                          </div>



                                          <div class=" row">
                                                <div class="input-group mb-3 col-sm-6">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Caste</span>
                                                      </div>
                                                      <input type="text" name="caste" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-6">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Supernal Ability</span>
                                                      </div>
                                                      <input type="text" name="supernalAbility" class="form-control text-right" onchange="setControlStates()">
                                                </div>
                                          </div>
                                    </form>
                              </div>
                        </div>
                  </div>

                  <div class="row">
                        <div class="card col-sm-12" style="margin-top: 20px;">
                              <div class="card-body">
                                    <h4 class="card-title">Attributes</h4>
                                    <form id="attributes">
                                          <div class=" row">
                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Strength</span>
                                                      </div>
                                                      <input type="text" name="strength" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Charisma</span>
                                                      </div>
                                                      <input type="text" name="charisma" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Perception</span>
                                                      </div>
                                                      <input type="text" name="perception" class="form-control text-right" onchange="setControlStates()">
                                                </div>
                                          </div>

                                          <div class=" row">
                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Dexterity</span>
                                                      </div>
                                                      <input type="text" name="dexterity" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Manipulation</span>
                                                      </div>
                                                      <input type="text" name="manipulation" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Intelligence</span>
                                                      </div>
                                                      <input type="text" name="intelligence" class="form-control text-right" onchange="setControlStates()">
                                                </div>
                                          </div>


                                          <div class=" row">
                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Stamina</span>
                                                      </div>
                                                      <input type="text" name="stamina" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Appearance</span>
                                                      </div>
                                                      <input type="text" name="appearance" class="form-control text-right" onchange="setControlStates()">
                                                </div>

                                                <div class="input-group mb-3 col-sm-4">
                                                      <div class="input-group-prepend">
                                                            <span class="input-group-text">Wits</span>
                                                      </div>
                                                      <input type="text" name="wits" class="form-control text-right" onchange="setControlStates()">
                                                </div>
                                          </div>
                                    </form>
                              </div>
                        </div>
                  </div>

                  <div class="row">
                        <div class="col-sm-4">
                              <div class="row">
                                    <div class="card col-sm-12" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Abilities</h4>
                                                <form id="abilities">
                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="archery-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Archery</span>
                                                                        </div>
                                                                        <input type="text" name="archery" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="athletics-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Athletics</span>
                                                                        </div>
                                                                        <input type="text" name="athletics" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="awareness-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Awareness</span>
                                                                        </div>
                                                                        <input type="text" name="awareness" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="brawl-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Brawl</span>
                                                                        </div>
                                                                        <input type="text" name="brawl" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="bureaucracy-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Bureaucracy</span>
                                                                        </div>
                                                                        <input type="text" name="bureaucracy" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="craft-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Craft</span>
                                                                        </div>
                                                                        <input type="text" name="craft" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>

                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="dodge-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Dodge</span>
                                                                        </div>
                                                                        <input type="text" name="dodge" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="integrity-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Integrity</span>
                                                                        </div>
                                                                        <input type="text" name="integrity" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>



                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="investigation-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Investigation</span>
                                                                        </div>
                                                                        <input type="text" name="investigation" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="larceny-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Larceny</span>
                                                                        </div>
                                                                        <input type="text" name="larceny" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="linguistics-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Linguistics</span>
                                                                        </div>
                                                                        <input type="text" name="linguistics" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="lore-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Lore</span>
                                                                        </div>
                                                                        <input type="text" name="lore" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>

                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="martialArts-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Martial
                                                                                    Arts</span>
                                                                        </div>
                                                                        <input type="text" name="martialArts" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="medecine-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Medecine</span>
                                                                        </div>
                                                                        <input type="text" name="medecine" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>



                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="melee-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Melee</span>
                                                                        </div>
                                                                        <input type="text" name="melee" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="occult-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Occult</span>
                                                                        </div>
                                                                        <input type="text" name="occult" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>




                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="performance-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Performance</span>
                                                                        </div>
                                                                        <input type="text" name="performance" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>





                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="presence-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Presence</span>
                                                                        </div>
                                                                        <input type="text" name="presence" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="resistance-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Resistance</span>
                                                                        </div>
                                                                        <input type="text" name="resistance" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="ride-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Ride</span>
                                                                        </div>
                                                                        <input type="text" name="ride" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>



                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="sail-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Sail</span>
                                                                        </div>
                                                                        <input type="text" name="sail" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>



                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="socialize-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Socialize</span>
                                                                        </div>
                                                                        <input type="text" name="socialize" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="stealth-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Stealth</span>
                                                                        </div>
                                                                        <input type="text" name="stealth" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>



                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="survival-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Survival</span>
                                                                        </div>
                                                                        <input type="text" name="survival" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="thrown-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">Thrown</span>
                                                                        </div>
                                                                        <input type="text" name="thrown" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>


                                                      <div class="form-row">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="war-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <span class="input-group-text">War</span>
                                                                        </div>
                                                                        <input type="text" name="war" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </form>
                                          </div>
                                    </div>
                              </div>
                              <div class="row">
                                    <div class="card col-sm-12" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Additionnal Abilities</h4>
                                                <form id="additionalAbilities">
                                                      <div class="form-row" id="additional1">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="additional1-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <input type="text" name="additional1-name" class="form-control" onchange="setControlStates()">
                                                                        </div>
                                                                        <input type="text" name="additional1-value" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>

                                                      <div class="form-row" id="additional2">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="additional2-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <input type="text" name="additional2-name" class="form-control" onchange="setControlStates()">
                                                                        </div>
                                                                        <input type="text" name="additional2-value" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>

                                                      <div class="form-row" id="additional3">
                                                            <div class="col-12">
                                                                  <div class="input-group">
                                                                        <div class="input-group-text">
                                                                              <input name="additional3-favorite" type="checkbox" onchange="setControlStates()">
                                                                        </div>
                                                                        <div class="input-group-prepend">
                                                                              <input type="text" name="additional3-name" class="form-control" onchange="setControlStates()">
                                                                        </div>
                                                                        <input type="text" name="additional3-value" class="form-control text-right" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </form>
                                          </div>
                                    </div>
                              </div>
                        </div>

                        <div class="col-sm-8">
                              <div class="row">
                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Specializations</h4>
                                                <form id="specializations">
                                                      <div class="form-row" id="specialization1">
                                                            <input type="text" name="specialization1-value" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="specialization2">
                                                            <input type="text" name="specialization2-value" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="specialization3">
                                                            <input type="text" name="specialization3-value" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="specialization4">
                                                            <input type="text" name="specialization4-value" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="specialization5">
                                                            <input type="text" name="specialization5-value" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="specialization6">
                                                            <input type="text" name="specialization6-value" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                </form>
                                          </div>
                                    </div>

                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Merits</h4>
                                                <form id="merits">
                                                      <div class="form-row" id="merit1">
                                                            <div class="col-10">
                                                                  <input type="text" class="form-control" name="merit1-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-2">
                                                                  <input type="text" class="form-control" name="merit1-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                      <div class="form-row" id="merit2">
                                                            <div class="col-10">
                                                                  <input type="text" class="form-control" name="merit2-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-2">
                                                                  <input type="text" class="form-control" name="merit2-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                      <div class="form-row" id="merit3">
                                                            <div class="col-10">
                                                                  <input type="text" class="form-control" name="merit3-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-2">
                                                                  <input type="text" class="form-control" name="merit3-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>



                                                      <div class="form-row" id="merit4">
                                                            <div class="col-10">
                                                                  <input type="text" class="form-control" name="merit4-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-2">
                                                                  <input type="text" class="form-control" name="merit4-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>



                                                      <div class="form-row" id="merit5">
                                                            <div class="col-10">
                                                                  <input type="text" class="form-control" name="merit5-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-2">
                                                                  <input type="text" class="form-control" name="merit5-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>




                                                      <div class="form-row" id="merit6">
                                                            <div class="col-10">
                                                                  <input type="text" class="form-control" name="merit6-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-2">
                                                                  <input type="text" class="form-control" name="merit6-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                </form>
                                          </div>
                                    </div>
                              </div>


                              <div class="row">
                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Willpower</h4>
                                                <form id="willpower">
                                                      <div class="form-row">
                                                            <div class="col-6">
                                                                  <input type="text" class="form-control" name="current" placeholder="current" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-6">
                                                                  <input type="text" class="form-control" name="max" placeholder="max" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                </form>
                                          </div>
                                    </div>

                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Limit Break</h4>
                                                <form id="limitBreak">
                                                      <div class="form-row">
                                                            <div class="col-6">
                                                                  <input type="text" class="form-control" name="current" placeholder="current" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-6">
                                                                  <input type="text" class="form-control" name="max" placeholder="max" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                </form>
                                          </div>
                                    </div>

                              </div>

                              <div class="row">
                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Essence</h4>
                                                <form id="essence">
                                                      <div class=" row">
                                                            <div class="input-group col-sm-12">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Essence
                                                                              Level</span>
                                                                  </div>
                                                                  <input type="text" name="essenceLevel" class="form-control text-right" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class=" row">
                                                            <div class="input-group col-sm-12">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Personal</span>
                                                                  </div>
                                                                  <input type="text" name="current-personal" class="form-control text-right" placeholder="Current" onchange="setControlStates()">
                                                                  <input type="text" name="max-personal" class="form-control text-right" placeholder="Max" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class=" row">
                                                            <div class="input-group col-sm-12">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Peripherical</span>
                                                                  </div>
                                                                  <input type="text" name="current-peripherical" class="form-control text-right" placeholder="Current" onchange="setControlStates()">
                                                                  <input type="text" name="max-peripherical" class="form-control text-right" placeholder="Max" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class=" row">
                                                            <div class="input-group col-sm-12">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Commited</span>
                                                                  </div>
                                                                  <input type="text" name="commited" class="form-control text-right" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                </form>
                                          </div>
                                    </div>


                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Limit Trigger</h4>
                                                <form id="limitTrigger">
                                                      <div class="form-row" id="limitTrigger1">
                                                            <input type="text" name="limitTrigger1-name" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="limitTrigger2">
                                                            <input type="text" name="limitTrigger2-name" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="limitTrigger3">
                                                            <input type="text" name="limitTrigger3-name" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                      <div class="form-row" id="limitTrigger4">
                                                            <input type="text" name="limitTrigger4-name" class="form-control" onchange="setControlStates()">
                                                      </div>
                                                </form>
                                          </div>
                                    </div>
                              </div>


                              <div class="row">
                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Experience</h4>
                                                <form id="normal-experience">
                                                      <div class=" row">

                                                            <input type="text" name="current" class="form-control text-right col-6" placeholder="Current" onchange="setControlStates()">
                                                            <input type="text" name="total" class="form-control text-right col-6" placeholder="Max" onchange="setControlStates()">

                                                      </div>
                                                </form>
                                          </div>
                                    </div>


                                    <div class="card col-sm-6" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Solar Experience</h4>
                                                <form id="solar-experience">

                                                      <div class=" row">

                                                            <input type="text" name="current" class="form-control text-right col-6" placeholder="Current" onchange="setControlStates()">
                                                            <input type="text" name="total" class="form-control text-right col-6" placeholder="Max" onchange="setControlStates()">

                                                      </div>
                                                </form>
                                          </div>
                                    </div>
                              </div>

                              <div class="row">
                                    <div class="card col-sm-12" style="margin-top: 20px;">
                                          <div class="card-body">
                                                <h4 class="card-title">Weapons</h4>

                                                <form id="weapons">
                                                      <div class="form-row" id="weapon1">
                                                            <div class=" col-md-4">
                                                                  <label for="weapon-name">Weapon Name</label>
                                                                  <input type="text" class="form-control" id="weapon-name" placeholder="Weapon" name="weapon1-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-1">
                                                                  <label for="accuracy">ACC</label>
                                                                  <input type="text" class="form-control" id="accuracy" name="weapon1-accuracy" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-1">
                                                                  <label for="damage">DMG</label>
                                                                  <input type="text" class="form-control" id="damage" name="weapon1-damage" onchange="setControlStates()">
                                                            </div>

                                                            <div class=" col-md-1">
                                                                  <label for="defence">DEF</label>
                                                                  <input type="text" class="form-control" id="defence" name="weapon1-defense" onchange="setControlStates()">
                                                            </div>


                                                            <div class=" col-md-1">
                                                                  <label for="overwhelming">OVW</label>
                                                                  <input type="text" class="form-control" id="overwhelming" name="weapon1-overwhelming" onchange="setControlStates()">
                                                            </div>

                                                            <div class=" col-md-3">
                                                                  <label for="tags">Tags</label>
                                                                  <input type="text" class="form-control" id="tags" name="weapon1-tags" onchange="setControlStates()">
                                                            </div>


                                                            <div class=" col-md-1">
                                                                  <label for="dices">Dice</label>
                                                                  <input type="text" class="form-control" id="dices" name="weapon1-dicePool" onchange="setControlStates()">
                                                            </div>
                                                      </div>



                                                      <div class="form-row" id="weapon2">
                                                            <div class=" col-md-4">
                                                                  <input type="text" class="form-control" name="weapon2-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-1">
                                                                  <input type="text" class="form-control" name="weapon2-accuracy" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-1">
                                                                  <input type="text" class="form-control" name="weapon2-damage" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-1">
                                                                  <input type="text" class="form-control" name="weapon2-defense" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-1">
                                                                  <input type="text" class="form-control" name="weapon2-overwhelming" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-3">
                                                                  <input type="text" class="form-control" name="weapon2-tags" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-1">
                                                                  <input type="text" class="form-control" name="weapon2-dicePool" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                </form>
                                          </div>
                                    </div>
                              </div>
                        </div>
                  </div>

                  <div class="row">
                        <div class="card col-sm-12" style="margin-top: 20px;">
                              <div class="card-body">
                                    <h4 class="card-title">Health & Defense</h4>
                                    <form id="armors-defense">
                                          <div class="row">
                                                <div class="col-7">
                                                      <div class="row" id="armor1">
                                                            <div class=" col-md-3">
                                                                  <label for="armor">Armor</label>
                                                                  <input type="text" class="form-control" id="armor" name="armor1-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-2">
                                                                  <label for="soak">Soak</label>
                                                                  <input type="text" class="form-control" id="soak" name="armor1-soak" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-2">
                                                                  <label for="hardness">Hard</label>
                                                                  <input type="text" class="form-control" id="hardness" name="armor1-hardness" onchange="setControlStates()">
                                                            </div>

                                                            <div class=" col-md-2">
                                                                  <label for="mp">MP</label>
                                                                  <input type="text" class="form-control" id="mp" name="armor1-mobilityPenalty" onchange="setControlStates()">
                                                            </div>


                                                            <div class=" col-md-3">
                                                                  <label for="tags">Tags</label>
                                                                  <input type="text" class="form-control" id="tags" name="armor1-tags" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                      <div class="row" id="armor2">
                                                            <div class=" col-md-3">
                                                                  <input type="text" class="form-control" id="armor" name="armor2-name" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-2">
                                                                  <input type="text" class="form-control" id="soak" name="armor2-soak" onchange="setControlStates()">
                                                            </div>
                                                            <div class=" col-md-2">
                                                                  <input type="text" class="form-control" id="hardness" name="armor2-hardness" onchange="setControlStates()">
                                                            </div>

                                                            <div class=" col-md-2">
                                                                  <input type="text" class="form-control" id="mp" name="armor2-mobilityPenalty" onchange="setControlStates()">
                                                            </div>


                                                            <div class=" col-md-3">
                                                                  <input type="text" class="form-control" id="tags" name="armor2-tags" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row">
                                                            <div class=" col-md-5">
                                                                  <label for="natural-soak">Natural Soak</label>
                                                                  <input type="text" class="form-control" id="natural-soak" name="naturalSoak" onchange="setControlStates()">
                                                            </div>
                                                            <div class="offset-3 col-md-4">
                                                                  <label for="final-soak">Final Soak</label>
                                                                  <input type="text" class="form-control" id="final-soak" name="finalSoak" onchange="setControlStates()">
                                                            </div>

                                                      </div>
                                                </div>

                                                <div class="col-5">
                                                      <div class="row">
                                                            <div class=" col-6 input-group">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Parry</span>
                                                                  </div>
                                                                  <input type="text" name="parry" class="form-control text-right" onchange="setControlStates()">
                                                            </div>

                                                            <div class=" col-6 input-group">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Resolve</span>
                                                                  </div>
                                                                  <input type="text" name="resolve" class="form-control text-right" onchange="setControlStates()">
                                                            </div>

                                                      </div>

                                                      <div class="row">
                                                            <div class=" col-6 input-group">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Evasion</span>
                                                                  </div>
                                                                  <input type="text" name="evasion" class="form-control text-right" onchange="setControlStates()">
                                                            </div>

                                                            <div class=" col-6 input-group">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Guile</span>
                                                                  </div>
                                                                  <input type="text" name="guile" class="form-control text-right" onchange="setControlStates()">
                                                            </div>
                                                      </div>

                                                      <div class="row">
                                                            <div class=" col-6 input-group">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Rush</span>
                                                                  </div>
                                                                  <input type="text" name="rush" class="form-control text-right" onchange="setControlStates()">
                                                            </div>

                                                            <div class=" col-6 input-group">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Disengage</span>
                                                                  </div>
                                                                  <input type="text" name="disengage" class="form-control text-right" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                      <div class="row">
                                                            <div class="offset-3 col-6 input-group">
                                                                  <div class="input-group-prepend">
                                                                        <span class="input-group-text">Join Battle</span>
                                                                  </div>
                                                                  <input type="text" name="joinBattle" class="form-control text-right" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>
                                    </form>

                                    <h3 class="card-title mt-1">Health</h3>
                                    <form id="health">
                                          <div class="row">
                                                <div class="col-6">
                                                      <div class="row">
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health1-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health2-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health3-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health4-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health5-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health6-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health7-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health8-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health9-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health10-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health11-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health12-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                      <div class="row">
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health1-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health2-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health3-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health4-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health5-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health6-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health7-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health8-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health9-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health10-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health11-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health12-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                                <div class="col-6">
                                                      <div class="row">
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health13-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health14-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health15-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health16-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health17-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health18-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health19-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health20-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health21-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health22-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health23-value" onchange="setControlStates()">
                                                            </div>
                                                            <div class="col-1 pr-0">
                                                                  <input type="text" class="form-control p-0 text-center" name="health24-value" onchange="setControlStates()">
                                                            </div>
                                                      </div>
                                                      <div class="row">
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health13-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health14-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health15-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health16-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health17-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health18-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health19-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health20-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health21-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health22-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health23-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                            <div class="col-1 pr-0 text-center">
                                                                  <div class="form-check">
                                                                        <input class="form-check-input position-static" type="checkbox" name="health24-hit" onchange="setControlStates()">
                                                                  </div>
                                                            </div>
                                                      </div>
                                                </div>
                                          </div>
                                    </form>
                              </div>
                        </div>
                  </div>


            </div>
      </div>
</div>

<script>

      var charactar = {
            "id": 0,
            "owner": 2,
            "data": {
                  "general": {
                        "name": "glimpse",
                        "caste": "night",
                        "concept": "thief",
                        "anima": "pegasus",
                        "supernalAbility": "Athletics"
                  },

                  "attributes": {
                        "strength": 1,
                        "dexterity": 1,
                        "stamina": 1,
                        "charisma": 2,
                        "manipulation": 2,
                        "appearance": 2,
                        "perception": 3,
                        "intelligence": 3,
                        "wits": 3
                  },

                  "abilities": [
                        {
                              "name": "archery",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "athletics",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "awareness",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "brawl",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "bureaucracy",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "craft",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "dodge",
                              "value": 1,
                              "favorite": true
                        },
                        {
                              "name": "integrity",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "investigation",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "larceny",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "linguistics",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "lore",
                              "value": 2,
                              "favorite": true
                        },
                        {
                              "name": "martialArts",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "medecine",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "melee",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "occult",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "performance",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "presence",
                              "value": 1,
                              "favorite": true
                        },
                        {
                              "name": "resistance",
                              "value": 5,
                              "favorite": false
                        },
                        {
                              "name": "ride",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "sail",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "socialize",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "stealth",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "survival",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "thrown",
                              "value": 1,
                              "favorite": false
                        },
                        {
                              "name": "war",
                              "value": 1,
                              "favorite": false
                        }
                  ],

                  "additionalAbilities": [
                        {
                              "name": "poop throwing",
                              "value": 5,
                              "favorite": true
                        },
                        {
                              "name": "dancing",
                              "value": 7,
                              "favorite": false
                        }
                  ],

                  "specializations": [
                        { "value": "+1 larceny when gambling" },
                        { "value": "+1 strength when brawling" }
                  ],

                  "merits": [
                        {
                              "name": "eye of the serpent",
                              "value": 5
                        },
                        {
                              "name": "mouse of the speaker",
                              "value": 3
                        }
                  ],

                  "willpower": {
                        "current": 3,
                        "max": 5
                  },

                  "limitBreak":
                  {
                        "current": 3,
                        "max": 5
                  },

                  "essence":
                  {
                        "essenceLevel": 5,
                        "motes": {
                              "personal":
                              {
                                    "current": 30,
                                    "max": 35
                              },
                              "peripherical":
                              {
                                    "current": 16,
                                    "max": 32
                              },

                              "commited": 10
                        }
                  },

                  "limitTrigger": [
                        { "name": "trahison" },
                        { "name": "rien" }
                  ],

                  "experience": {
                        "normal": {
                              "current": 160,
                              "total": 200
                        },

                        "solar": {
                              "current": 20,
                              "total": 30
                        }
                  },

                  "weapons": [
                        {
                              "name": "heavenly typhoone",
                              "accuracy": 20,
                              "damage": 10,
                              "defense": 5,
                              "overwhelming": 2,
                              "tags": "ranged, heavy",
                              "dicePool": 20
                        },
                        {
                              "name": "volcanic hammer",
                              "accuracy": 30,
                              "damage": 100,
                              "defense": 50,
                              "overwhelming": 5,
                              "tags": "burning, heavy",
                              "dicePool": 40
                        }
                  ],

                  "armors": [
                        {
                              "name": "buffed jacket",
                              "soak": 4,
                              "hardness": 5,
                              "mobilityPenalty": 2,
                              "tags": "cheap"
                        },
                        {
                              "name": "reinforced jacket",
                              "soak": 4,
                              "hardness": 5,
                              "mobilityPenalty": 2,
                              "tags": "expensive"
                        }
                  ],

                  "defense": {
                        "naturalSoak": 2,
                        "finalSoak": 3,
                        "parry": 20,
                        "resolve": 2,
                        "evasion": 3,
                        "guile": 4,
                        "rush": 1,
                        "disengage": 3,
                        "joinBattle": 5
                  },

                  "health": [
                        {
                              "value": -0,
                              "hit": false // ticked if not null will be { type : "bashing||lethal||aggrave"}
                        },
                        {
                              "value": -0,
                              "hit": false
                        },
                        {
                              "value": -0,
                              "hit": false
                        },
                        {
                              "value": -0,
                              "hit": false
                        },
                        {
                              "value": -1,
                              "hit": true
                        },
                        {
                              "value": -1,
                              "hit": false
                        },
                        {
                              "value": -2,
                              "hit": false
                        },
                  ],

                  "intimacies": [
                        {
                              "name": "protect the people",
                              "intensity": "major"
                        },
                        {
                              "name": "I hate bob",
                              "intensity": "defining"
                        }
                  ],

                  "charms": [
                        {
                              "name": "summoner of typhoon",
                              "type": "magic",
                              "duration": "instant",
                              "cost": "1m, 1w", // will be one day { "motes" : 2, "willpower" : 2, "sorceryMotes" : 20}
                              "book": "core",
                              "page": 200,
                              "effects": "burns and blind everyone"
                        },

                        {
                              "name": "summoner of volcanoes",
                              "type": "magic",
                              "duration": "instant",
                              "cost": "1m, 1w",
                              "book": "core",
                              "page": 200,
                              "effects": "burns and blind everyone with volcanic dust"
                        }
                  ],

                  "inventory": [
                        { "item": "sword of magic" },
                        { "item": "draconic concoction" }
                  ]
            }
      };


      function fillSingle(form, data) {
            if (data == null) {
                  return;
            }

            var form = document.getElementById(form);

            // Loop over the object keys
            Object.keys(data).forEach(function (k) {

                  form.querySelector('[name="' + k + '"]').value = data[k];

            });
      }

      function fillAbilities(abilities) {
            if (abilities == null) {
                  return;
            }

            var form = document.getElementById("abilities");

            abilities.forEach(ability => {
                  form.querySelector('[name="' + ability["name"] + '"]').value = ability["value"];
                  form.querySelector('[name="' + ability["name"] + '-favorite"]').checked = ability["favorite"]
            });

      }

      function fillMulti(form, data, prepend) {

            if (data == null) {
                  return
            }

            var form = document.getElementById(form);

            data.forEach(function (item, i) {

                  var elements = form.querySelectorAll('div[id^="' + prepend + '"]');

                  Object.keys(item).forEach(function (k) {

                        var element = elements[i];

                        var id = element.id.split(prepend)[1]

                        input = form.querySelector('[name="' + prepend + id + "-" + k + '"]');

                        if (input == null) {
                              return;
                        }

                        if (input.type == "checkbox") {
                              form.querySelector('[name="' + prepend + id + "-" + k + '"]').checked = item[k]
                        }
                        else {

                              form.querySelector('[name="' + prepend + id + "-" + k + '"]').value = item[k]
                        }
                  });

            });
      }


      function fillEssence(essence) {
            if (essence == null) {
                  return;
            }

            var form = document.getElementById("essence");

            form.querySelector('[name="essenceLevel"]').value = essence["essenceLevel"];
            form.querySelector('[name="commited"]').value = essence["motes"]["commited"];

            form.querySelector('[name="current-personal"]').value = essence["motes"]["personal"]["current"];
            form.querySelector('[name="max-personal"]').value = essence["motes"]["personal"]["max"];

            form.querySelector('[name="current-peripherical"]').value = essence["motes"]["peripherical"]["current"];
            form.querySelector('[name="max-peripherical"]').value = essence["motes"]["peripherical"]["max"];

      }


      function fillCharacter(character) {
            fillSingle("general", character["data"]["general"]);
            fillSingle("attributes", character["data"]["attributes"]);

            fillAbilities(character["data"]["abilities"]);

            fillMulti("additionalAbilities", character["data"]["additionalAbilities"], "additional")

            fillMulti("merits", character["data"]["merits"], "merit");
            fillMulti("specializations", character["data"]["specializations"], "specialization")

            fillMulti("weapons", character["data"]["weapons"], "weapon");


            if (character["data"]["charms"] != null) {
                  document.getElementById("charms").innerHTML = ""

                  var charmLength = character["data"]["charms"].length;

                  for (var i = 0; i < charmLength; i++) {
                        addRow(charmTemplate, "charms", "charm")
                  }

                  fillMulti("charms", character["data"]["charms"], "charm");
            }

            fillMulti("intimacies", character["data"]["intimacies"], "intimacy");
            fillMulti("inventory", character["data"]["inventory"], "inventory");
            // fillMulti("health", character["data"]["health"], "health"); need to rework health
            fillSingle("willpower", character["data"]["willpower"]);
            fillSingle("limitBreak", character["data"]["limitBreak"]);
            fillMulti("limitTrigger", character["data"]["limitTrigger"], "limitTrigger");
            fillMulti("armors-defense", character["data"]["armors"], "armor")
            fillSingle("armors-defense", character["data"]["defense"])

            fillEssence(character["data"]["essence"])

            if (character["data"]["experience"] != null) {

                  fillSingle("normal-experience", character["data"]["experience"]["normal"])
                  fillSingle("solar-experience", character["data"]["experience"]["solar"])

            }

      }


      //fillCharacter(charactar)

	/*

		GETTING JSON

	*/



      function getJSONSingle(form, removeContain) {
            var form = document.getElementById(form);

            var data = new FormData(form);

            var object = {};

            data.forEach(function (value, key) {
                  if (removeContain != null && removeContain != "" && key.indexOf(removeContain) != -1) {
                        return;
                  }

                  var valueInt = parseInt(value)

                  if (!isNaN(valueInt)) {
                        object[key] = valueInt;
                  }
                  else {
                        object[key] = value;
                  }
            });

            return object
      }


      function getJSONAbilities() {
            var form = document.getElementById("abilities");

            var data = new FormData(form);

            var abilities = [];


            data.forEach(function (value, key) {

                  if (key.indexOf("favorite") != -1) {
                        return;
                  }

                  var ability = {}
                  ability["name"] = key;
                  ability["value"] = parseInt(value);

                  favoriteKey = key + "-favorite"

                  if (data.has(favoriteKey)) {
                        ability["favorite"] = data.get(favoriteKey) == "on"
                  }
                  else {
                        ability["favorite"] = false
                  }

                  abilities.push(ability)
            });

            return abilities
      }


      function getJSONAdditionalAbilities() {
            var form = document.getElementById("additionalAbilities");

            var data = new FormData(form);

            var abilities = [];

            data.forEach(function (value, key) {

                  isolatedKey = key.split("-")[0] // additional1...

                  abilityName = data.get(isolatedKey + "-name");

                  if (abilities.some(function (element) { return element["name"] == abilityName })) // prevent doublons
                  {
                        return;
                  }

                  if (abilityName == null || abilityName == "") { // not sure if we want to save empty rows
                        return;
                  }

                  var ability = {}

                  ability["name"] = data.get(isolatedKey + "-name");
                  ability["value"] = parseInt(data.get(isolatedKey + "-value"));

                  favoriteKey = isolatedKey + "-favorite"

                  if (data.has(favoriteKey)) {
                        ability["favorite"] = data.get(favoriteKey) == "on"
                  }
                  else {
                        ability["favorite"] = false
                  }

                  abilities.push(ability)
            });

            return abilities
      }

      function getJSONEssence() {
            var form = document.getElementById("essence");
            var data = new FormData(form);

            var essence = {
                  "motes":
                  {
                        "personal":
                        {
                              "current": 0,
                              "max": 0
                        },

                        "peripherical":
                        {
                              "current": 0,
                              "max": 0
                        },

                        "commited": 0
                  }
            };

            essence["essenceLevel"] = parseInt(data.get("essenceLevel"));
            essence["motes"]["personal"]["current"] = parseInt(data.get("current-personal"));
            essence["motes"]["personal"]["max"] = parseInt(data.get("max-personal"));
            essence["motes"]["peripherical"]["current"] = parseInt(data.get("current-peripherical"));
            essence["motes"]["peripherical"]["max"] = parseInt(data.get("max-peripherical"));
            essence["motes"]["commited"] = parseInt(data.get("commited"));

            return essence;

      }

      var weaponsFields =
      {
            "fields": [
                  {
                        "value": "name",
                        "type": "input"
                  },
                  {
                        "value": "accuracy",
                        "type": "input"
                  },
                  {
                        "value": "damage",
                        "type": "input"
                  },
                  {
                        "value": "defense",
                        "type": "input"
                  },
                  {
                        "value": "overwhelming",
                        "type": "input"
                  },
                  {
                        "value": "tags",
                        "type": "input"
                  },
                  {
                        "value": "dicePool",
                        "type": "input"
                  }
            ]
      }

      var armorsFields = {
            "fields": [
                  {
                        "value": "name",
                        "type": "input"
                  },
                  {
                        "value": "soak",
                        "type": "input"
                  },
                  {
                        "value": "hardness",
                        "type": "input"
                  },
                  {
                        "value": "mobilityPenalty",
                        "type": "input"
                  },
                  {
                        "value": "tags",
                        "type": "input"
                  },
            ]
      }

      var healthFields = {
            "fields": [
                  {
                        "value": "value",
                        "type": "input"
                  },
                  {
                        "value": "hit",
                        "type": "checkbox"
                  }
            ]
      }

      var intimaciesFields = {
            "fields": [
                  {
                        "value": "name",
                        "type": "input"
                  }, {
                        "value": "intensity",
                        "type": "input"
                  },
            ]
      }

      var charmsFields = {
            "fields": [
                  {
                        "value": "name",
                        "type": "input"
                  },
                  {
                        "value": "type",
                        "type": "input"
                  },
                  {
                        "value": "duration",
                        "type": "input"
                  },
                  {
                        "value": "cost",
                        "type": "input"
                  },
                  {
                        "value": "book",
                        "type": "input"
                  },
                  {
                        "value": "page",
                        "type": "input"
                  },
                  {
                        "value": "effects",
                        "type": "input"
                  }
            ]

      }

      var inventoryFields = {
            "fields": [
                  {
                        "value": "item",
                        "type": "input"
                  },
            ]
      }

      var specializationFields = {
            "fields": [
                  {
                        "value": "value",
                        "type": "input"
                  }
            ]
      }

      var limitTrigggerFields = {
            "fields": [
                  {
                        "value": "name",
                        "type": "input"
                  }
            ]
      }

      var meritsFields = {
            "fields": [
                  {
                        "value": "name",
                        "type": "input"
                  },
                  {
                        "value": "value",
                        "type": "input"
                  }
            ]
      }

      function getJSONMulti(form, fields, prepend) {
            var form = document.getElementById(form);

            var data = new FormData(form);

            var jsonArray = [];

            var items = [];

            data.forEach(function (value, key) {

                  isolatedKey = key.split("-")[0];

                  if (items.indexOf(isolatedKey) == -1 && isolatedKey.indexOf(prepend) != -1) {
                        items.push(isolatedKey);
                  }
            });

            

            items.forEach(function (item, i) {

                  var id = item.split(prepend)[1];

                  var object = {}

                  fields["fields"].forEach(function (field) {

                        var realKey = prepend + id + "-" + field["value"];

                        if (field["type"] == "checkbox") {
                              if (data.has(realKey)) {
                                    object[field["value"]] = true;
                              } else {
                                    object[field["value"]] = false
                              }
                        }
                        else {

                              var tryint = parseInt(data.get(realKey));

                              if (!isNaN(tryint)) {

                                    object[field["value"]] = tryint;
                              }
                              else {
                                    object[field["value"]] = data.get(realKey);
                              }

                        }

                  });

                  jsonArray.push(object)
            });

            return jsonArray

      }

      function getCharacterDataJSON() {
            var t0 = performance.now();

            var data = {
                  "experience":
                  {
                        "normal": null,
                        "solar": null
                  }
            }

            data["general"] = getJSONSingle("general");
            data["attributes"] = getJSONSingle("attributes");
            data["abilities"] = getJSONAbilities();
            data["specializations"] = getJSONMulti("specializations", specializationFields, "specialization")
            data["additionalAbilities"] = getJSONAdditionalAbilities();
            data["merits"] = getJSONMulti("merits", meritsFields, "merit")
            data["willpower"] = getJSONSingle("willpower");
            data["limitBreak"] = getJSONSingle("limitBreak");
            data["essence"] = getJSONEssence("essence");
            data["limitTrigger"] = getJSONMulti("limitTrigger", limitTrigggerFields, "limitTrigger")
            data["experience"]["normal"] = getJSONSingle("normal-experience");
            data["experience"]["solar"] = getJSONSingle("solar-experience");
            data["weapons"] = getJSONMulti("weapons", weaponsFields, "weapon");
            data["armors"] = getJSONMulti("armors-defense", armorsFields, "armor");
            data["defense"] = getJSONSingle("armors-defense", "armor");
            data["health"] = getJSONMulti("health", healthFields, "health", true);
            data["intimacies"] = getJSONMulti("intimacies", intimaciesFields, "intimacy")
            data["charms"] = getJSONMulti("charms", charmsFields, "charm")
            data["inventory"] = getJSONMulti("inventory", inventoryFields, "inventory")

            var t1 = performance.now();

            console.log(data)
            console.log("Call to doSomething took " + (t1 - t0) + " milliseconds.")

            return data;
      }



      getCharacterDataJSON()


      // fetch character data and load it


      var splitresult = location.href.split("/sheet")[0].split("character/");


      var isRefreshing = false;

      function refresh() {

            isRefreshing = true;
            sendHttpGetRequest("/api/character/" + splitresult[splitresult.length - 1], function (data) {

                  dataJSON = JSON.parse(data);


                  dataJSON["data"] = JSON.parse(dataJSON["data"])

                  console.log(dataJSON)

                  fillCharacter(dataJSON)

                  isRefreshing = false;

                  document.getElementById("save-button").disabled = true;
            });

            getUserInfos(result => {
                  document.querySelector('[name="owner"]').value = result.name
            });

      }


      refresh();

      function saveCharacter() {
            datatosend = getCharacterDataJSON()

            console.log(datatosend)
            console.log(JSON.stringify(datatosend))

            sendHttpPostRequest("/api/character/" + splitresult[splitresult.length - 1] + "/update", JSON.stringify(datatosend), function (data) {

                  refresh();
                  refreshmenu();
            });
      }


      function setControlStates() {
            if (!isRefreshing) {
                  document.getElementById("save-button").disabled = false;
            }
      }


      function deleteRow(elementId, containerId, prepend) {
            var element = document.getElementById(elementId)

            if (element == null) {
                  return;
            }

            element.parentNode.removeChild(element);
      }

      var charmTemplate = `
<div class="form-row mt-3" id="charm__ID__">
      <div class=" col-md-3">
            <input type="text" class="form-control" name="charm__ID__-name" onchange="setControlStates()" placeholder="Name">
      </div>
      <div class=" col-md-1">
            <input type="text" class="form-control" name="charm__ID__-type" onchange="setControlStates()" placeholder="Type">
      </div>
      <div class=" col-md-1">
            <input type="text" class="form-control" name="charm__ID__-duration" onchange="setControlStates()" placeholder="Duration">
      </div>

      <div class=" col-md-1">
            <input type="text" class="form-control" name="charm__ID__-cost" onchange="setControlStates()" placeholder="Cost">
      </div>

      <div class=" col-md-1">
            <input type="text" class="form-control" name="charm__ID__-book" onchange="setControlStates()" placeholder="Book">
      </div>

      <div class=" col-md-1">
            <input type="text" class="form-control" name="charm__ID__-page" onchange="setControlStates()" placeholder="Book Page">
      </div>
      <div class=" col-md-3">
            <textarea class="form-control" name="charm__ID__-effects" rows="3" onchange="setControlStates()" placeholder="Effects"></textarea>
      </div>
      <div class="col-md-1">
            <button type="button" class="btn btn-primary float-right mt-3" onclick="deleteRow('charm__ID__'); setControlStates();"><i class="fas fa-trash-alt"></i></button>
      </div>
</div>
      `;

      function addRow(template, containerId, prepend) {
            var containerjquery = $("#" + containerId);
           // var container = document.getElementById(containerId);

            

            id = uniqueID();

            var htmltoadd = charmTemplate.split("__ID__").join(id)

            containerjquery.append(htmltoadd);

      }



      function uniqueID() {

  return  Math.random().toString(36).substr(2, 9);
};
</script>